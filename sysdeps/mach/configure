# This file is generated from configure.in by Autoconf.  DO NOT EDIT!

if test -n "$ac_tool_prefix"; then
  # Extract the first word of "${ac_tool_prefix}mig", so it can be a program name with args.
set dummy ${ac_tool_prefix}mig; ac_word=$2
echo "$as_me:$LINENO: checking for $ac_word" >&5
echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
if test "${ac_cv_prog_MIG+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  if test -n "$MIG"; then
  ac_cv_prog_MIG="$MIG" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
  for ac_exec_ext in '' $ac_executable_extensions; do
  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_MIG="${ac_tool_prefix}mig"
    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
done

fi
fi
MIG=$ac_cv_prog_MIG
if test -n "$MIG"; then
  echo "$as_me:$LINENO: result: $MIG" >&5
echo "${ECHO_T}$MIG" >&6
else
  echo "$as_me:$LINENO: result: no" >&5
echo "${ECHO_T}no" >&6
fi

fi
if test -z "$ac_cv_prog_MIG"; then
  ac_ct_MIG=$MIG
  # Extract the first word of "mig", so it can be a program name with args.
set dummy mig; ac_word=$2
echo "$as_me:$LINENO: checking for $ac_word" >&5
echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
if test "${ac_cv_prog_ac_ct_MIG+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  if test -n "$ac_ct_MIG"; then
  ac_cv_prog_ac_ct_MIG="$ac_ct_MIG" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
  for ac_exec_ext in '' $ac_executable_extensions; do
  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_MIG="mig"
    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
done

  test -z "$ac_cv_prog_ac_ct_MIG" && ac_cv_prog_ac_ct_MIG="MISSING"
fi
fi
ac_ct_MIG=$ac_cv_prog_ac_ct_MIG
if test -n "$ac_ct_MIG"; then
  echo "$as_me:$LINENO: result: $ac_ct_MIG" >&5
echo "${ECHO_T}$ac_ct_MIG" >&6
else
  echo "$as_me:$LINENO: result: no" >&5
echo "${ECHO_T}no" >&6
fi

  MIG=$ac_ct_MIG
else
  MIG="$ac_cv_prog_MIG"
fi

if test "x$MIG" = xMISSING; then
  { { echo "$as_me:$LINENO: error: cannot find required build tool mig" >&5
echo "$as_me: error: cannot find required build tool mig" >&2;}
   { (exit 1); exit 1; }; }
fi

### Sanity checks for Mach header installation


echo "$as_me:$LINENO: checking for mach/mach_types.h" >&5
echo $ECHO_N "checking for mach/mach_types.h... $ECHO_C" >&6
if test "${ac_cv_header_mach_mach_types_h+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/mach_types.h>
_ACEOF
if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } >/dev/null; then
  if test -s conftest.err; then
    ac_cpp_err=$ac_c_preproc_warn_flag
    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
  else
    ac_cpp_err=
  fi
else
  ac_cpp_err=yes
fi
if test -z "$ac_cpp_err"; then
  ac_cv_header_mach_mach_types_h=yes
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

  ac_cv_header_mach_mach_types_h=no
fi
rm -f conftest.err conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: $ac_cv_header_mach_mach_types_h" >&5
echo "${ECHO_T}$ac_cv_header_mach_mach_types_h" >&6
if test $ac_cv_header_mach_mach_types_h = yes; then
  :
else
  { { echo "$as_me:$LINENO: error: cannot find Mach headers" >&5
echo "$as_me: error: cannot find Mach headers" >&2;}
   { (exit 1); exit 1; }; }
fi


echo "$as_me:$LINENO: checking for mach/mach_types.defs" >&5
echo $ECHO_N "checking for mach/mach_types.defs... $ECHO_C" >&6
if test "${ac_cv_header_mach_mach_types_defs+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/mach_types.defs>
_ACEOF
if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } >/dev/null; then
  if test -s conftest.err; then
    ac_cpp_err=$ac_c_preproc_warn_flag
    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
  else
    ac_cpp_err=
  fi
else
  ac_cpp_err=yes
fi
if test -z "$ac_cpp_err"; then
  ac_cv_header_mach_mach_types_defs=yes
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

  ac_cv_header_mach_mach_types_defs=no
fi
rm -f conftest.err conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: $ac_cv_header_mach_mach_types_defs" >&5
echo "${ECHO_T}$ac_cv_header_mach_mach_types_defs" >&6
if test $ac_cv_header_mach_mach_types_defs = yes; then
  :
else
  { { echo "$as_me:$LINENO: error: cannot find Mach .defs files" >&5
echo "$as_me: error: cannot find Mach .defs files" >&2;}
   { (exit 1); exit 1; }; }
fi





echo "$as_me:$LINENO: checking for task_t in mach/mach_types.h" >&5
echo $ECHO_N "checking for task_t in mach/mach_types.h... $ECHO_C" >&6
if test "${libc_cv_mach_task_t+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/mach_types.h>
int
main ()
{
extern task_t foo;
  ;
  return 0;
}
_ACEOF
rm -f conftest.$ac_objext
if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
  (eval $ac_compile) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } &&
	 { ac_try='test -z "$ac_c_werror_flag"
			 || test ! -s conftest.err'
  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
  (eval $ac_try) 2>&5
  ac_status=$?
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); }; } &&
	 { ac_try='test -s conftest.$ac_objext'
  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
  (eval $ac_try) 2>&5
  ac_status=$?
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); }; }; then
  libc_cv_mach_task_t=task_t
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

libc_cv_mach_task_t=task_port_t
fi
rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: $libc_cv_mach_task_t" >&5
echo "${ECHO_T}$libc_cv_mach_task_t" >&6
if test $libc_cv_mach_task_t != task_t; then
  DEFINES="$DEFINES -Dtask_t=task_port_t"
fi
echo "$as_me:$LINENO: checking for thread_t in mach/mach_types.h" >&5
echo $ECHO_N "checking for thread_t in mach/mach_types.h... $ECHO_C" >&6
if test "${libc_cv_mach_thread_t+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/mach_types.h>
int
main ()
{
extern thread_t foo;
  ;
  return 0;
}
_ACEOF
rm -f conftest.$ac_objext
if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
  (eval $ac_compile) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } &&
	 { ac_try='test -z "$ac_c_werror_flag"
			 || test ! -s conftest.err'
  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
  (eval $ac_try) 2>&5
  ac_status=$?
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); }; } &&
	 { ac_try='test -s conftest.$ac_objext'
  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
  (eval $ac_try) 2>&5
  ac_status=$?
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); }; }; then
  libc_cv_mach_thread_t=thread_t
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

libc_cv_mach_thread_t=thread_port_t
fi
rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: $libc_cv_mach_thread_t" >&5
echo "${ECHO_T}$libc_cv_mach_thread_t" >&6
if test $libc_cv_mach_thread_t != thread_t; then
  DEFINES="$DEFINES -Dthread_t=thread_port_t"
fi

echo "$as_me:$LINENO: checking for creation_time in task_basic_info" >&5
echo $ECHO_N "checking for creation_time in task_basic_info... $ECHO_C" >&6
if test "${libc_cv_mach_task_creation_time+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/task_info.h>
int
main ()
{

extern struct task_basic_info *i;
long s = i->creation_time.seconds;

  ;
  return 0;
}
_ACEOF
rm -f conftest.$ac_objext
if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
  (eval $ac_compile) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } &&
	 { ac_try='test -z "$ac_c_werror_flag"
			 || test ! -s conftest.err'
  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
  (eval $ac_try) 2>&5
  ac_status=$?
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); }; } &&
	 { ac_try='test -s conftest.$ac_objext'
  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
  (eval $ac_try) 2>&5
  ac_status=$?
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); }; }; then
  libc_cv_mach_task_creation_time=yes
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

libc_cv_mach_task_creation_time=no
fi
rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: $libc_cv_mach_task_creation_time" >&5
echo "${ECHO_T}$libc_cv_mach_task_creation_time" >&6
if test $libc_cv_mach_task_creation_time = no; then
  { { echo "$as_me:$LINENO: error: you need Mach headers supporting task_info.creation_time" >&5
echo "$as_me: error: you need Mach headers supporting task_info.creation_time" >&2;}
   { (exit 1); exit 1; }; }
fi

mach_interface_list=
for ifc in mach mach4 \
	   clock clock_priv host_priv host_security ledger lock_set \
	   processor processor_set task thread_act vm_map \
	   memory_object memory_object_default default_pager \
	   i386/mach_i386 \
	   ; do
  as_ac_Header=`echo "ac_cv_header_mach/${ifc}.defs" | $as_tr_sh`
echo "$as_me:$LINENO: checking for mach/${ifc}.defs" >&5
echo $ECHO_N "checking for mach/${ifc}.defs... $ECHO_C" >&6
if eval "test \"\${$as_ac_Header+set}\" = set"; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/${ifc}.defs>
_ACEOF
if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } >/dev/null; then
  if test -s conftest.err; then
    ac_cpp_err=$ac_c_preproc_warn_flag
    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
  else
    ac_cpp_err=
  fi
else
  ac_cpp_err=yes
fi
if test -z "$ac_cpp_err"; then
  eval "$as_ac_Header=yes"
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

  eval "$as_ac_Header=no"
fi
rm -f conftest.err conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
if test `eval echo '${'$as_ac_Header'}'` = yes; then
    mach_interface_list="$mach_interface_list $ifc"
fi


done
if test "x$mach_interface_list" = x; then
  { { echo "$as_me:$LINENO: error: what manner of Mach is this?" >&5
echo "$as_me: error: what manner of Mach is this?" >&2;}
   { (exit 1); exit 1; }; }
fi

echo "$as_me:$LINENO: checking for egrep" >&5
echo $ECHO_N "checking for egrep... $ECHO_C" >&6
if test "${ac_cv_prog_egrep+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  if echo a | (grep -E '(a|b)') >/dev/null 2>&1
    then ac_cv_prog_egrep='grep -E'
    else ac_cv_prog_egrep='egrep'
    fi
fi
echo "$as_me:$LINENO: result: $ac_cv_prog_egrep" >&5
echo "${ECHO_T}$ac_cv_prog_egrep" >&6
 EGREP=$ac_cv_prog_egrep


echo "$as_me:$LINENO: checking for host_page_size in mach_host.defs" >&5
echo $ECHO_N "checking for host_page_size in mach_host.defs... $ECHO_C" >&6
if test "${libc_cv_mach_host_page_size+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/mach_host.defs>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "host_page_size" >/dev/null 2>&1; then
  libc_cv_mach_host_page_size=yes
else
  libc_cv_mach_host_page_size=no
fi
rm -f conftest*

fi
echo "$as_me:$LINENO: result: $libc_cv_mach_host_page_size" >&5
echo "${ECHO_T}$libc_cv_mach_host_page_size" >&6
if test $libc_cv_mach_host_page_size = yes; then
  cat >>confdefs.h <<\_ACEOF
#define HAVE_HOST_PAGE_SIZE 1
_ACEOF

fi

echo "$as_me:$LINENO: checking for mach/machine/ndr_def.h" >&5
echo $ECHO_N "checking for mach/machine/ndr_def.h... $ECHO_C" >&6
if test "${ac_cv_header_mach_machine_ndr_def_h+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/machine/ndr_def.h>
_ACEOF
if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } >/dev/null; then
  if test -s conftest.err; then
    ac_cpp_err=$ac_c_preproc_warn_flag
    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
  else
    ac_cpp_err=
  fi
else
  ac_cpp_err=yes
fi
if test -z "$ac_cpp_err"; then
  ac_cv_header_mach_machine_ndr_def_h=yes
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

  ac_cv_header_mach_machine_ndr_def_h=no
fi
rm -f conftest.err conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: $ac_cv_header_mach_machine_ndr_def_h" >&5
echo "${ECHO_T}$ac_cv_header_mach_machine_ndr_def_h" >&6
if test $ac_cv_header_mach_machine_ndr_def_h = yes; then
    DEFINES="$DEFINES -DNDR_DEF_HEADER='<mach/machine/ndr_def.h>'"
else
  echo "$as_me:$LINENO: checking for machine/ndr_def.h" >&5
echo $ECHO_N "checking for machine/ndr_def.h... $ECHO_C" >&6
if test "${ac_cv_header_machine_ndr_def_h+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <machine/ndr_def.h>
_ACEOF
if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
  ac_status=$?
  grep -v '^ *+' conftest.er1 >conftest.err
  rm -f conftest.er1
  cat conftest.err >&5
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); } >/dev/null; then
  if test -s conftest.err; then
    ac_cpp_err=$ac_c_preproc_warn_flag
    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
  else
    ac_cpp_err=
  fi
else
  ac_cpp_err=yes
fi
if test -z "$ac_cpp_err"; then
  ac_cv_header_machine_ndr_def_h=yes
else
  echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

  ac_cv_header_machine_ndr_def_h=no
fi
rm -f conftest.err conftest.$ac_ext
fi
echo "$as_me:$LINENO: result: $ac_cv_header_machine_ndr_def_h" >&5
echo "${ECHO_T}$ac_cv_header_machine_ndr_def_h" >&6
if test $ac_cv_header_machine_ndr_def_h = yes; then
    DEFINES="$DEFINES -DNDR_DEF_HEADER='<machine/ndr_def.h>'"
fi


fi



echo "$as_me:$LINENO: checking for i386_io_perm_modify in mach_i386.defs" >&5
echo $ECHO_N "checking for i386_io_perm_modify in mach_i386.defs... $ECHO_C" >&6
if test "${libc_cv_mach_i386_ioports+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/i386/mach_i386.defs>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "i386_io_perm_modify" >/dev/null 2>&1; then
  libc_cv_mach_i386_ioports=yes
else
  libc_cv_mach_i386_ioports=no
fi
rm -f conftest*

fi
echo "$as_me:$LINENO: result: $libc_cv_mach_i386_ioports" >&5
echo "${ECHO_T}$libc_cv_mach_i386_ioports" >&6
if test $libc_cv_mach_i386_ioports = yes; then
  cat >>confdefs.h <<\_ACEOF
#define HAVE_I386_IO_PERM_MODIFY 1
_ACEOF

fi

echo "$as_me:$LINENO: checking for i386_set_gdt in mach_i386.defs" >&5
echo $ECHO_N "checking for i386_set_gdt in mach_i386.defs... $ECHO_C" >&6
if test "${libc_cv_mach_i386_gdt+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat >conftest.$ac_ext <<_ACEOF
/* confdefs.h.  */
_ACEOF
cat confdefs.h >>conftest.$ac_ext
cat >>conftest.$ac_ext <<_ACEOF
/* end confdefs.h.  */
#include <mach/i386/mach_i386.defs>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "i386_set_gdt" >/dev/null 2>&1; then
  libc_cv_mach_i386_gdt=yes
else
  libc_cv_mach_i386_gdt=no
fi
rm -f conftest*

fi
echo "$as_me:$LINENO: result: $libc_cv_mach_i386_gdt" >&5
echo "${ECHO_T}$libc_cv_mach_i386_gdt" >&6
if test $libc_cv_mach_i386_gdt = yes; then
  cat >>confdefs.h <<\_ACEOF
#define HAVE_I386_SET_GDT 1
_ACEOF

fi



# See if mig groks `retcode'.
echo "$as_me:$LINENO: checking whether $MIG supports the retcode keyword" >&5
echo $ECHO_N "checking whether $MIG supports the retcode keyword... $ECHO_C" >&6
if test "${hurd_cv_mig_retcode+set}" = set; then
  echo $ECHO_N "(cached) $ECHO_C" >&6
else
  cat > conftest.defs <<\EOF
#include <mach/std_types.defs>
#include <mach/mach_types.defs>
subsystem foobar 1000;
type reply_port_t = polymorphic | MACH_MSG_TYPE_PORT_SEND_ONCE
	ctype: mach_port_t;
simpleroutine foobar_reply (
	reply_port: reply_port_t;
	err: kern_return_t, RetCode);
EOF
if { ac_try='CC="${CC}" ${MIG-false} -n conftest.defs 1>&5'
  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
  (eval $ac_try) 2>&5
  ac_status=$?
  echo "$as_me:$LINENO: \$? = $ac_status" >&5
  (exit $ac_status); }; }; then
  hurd_cv_mig_retcode=yes
else
  hurd_cv_mig_retcode=no
fi
rm -f conftest*
fi
echo "$as_me:$LINENO: result: $hurd_cv_mig_retcode" >&5
echo "${ECHO_T}$hurd_cv_mig_retcode" >&6
if test $hurd_cv_mig_retcode = yes; then
  cat >>confdefs.h <<\_ACEOF
#define HAVE_MIG_RETCODE 1
_ACEOF

fi
